<article class="markdown-body entry-content" itemprop="text"><h1><a href="#node-telegram-bot-api-tutorial" aria-hidden="true" class="anchor" id="user-content-node-telegram-bot-api-tutorial"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>node-telegram-bot-api-tutorial</h1>
<p>This is a beginners guide for <a href="https://github.com/yagop/node-telegram-bot-api">node-telegram-bot-api</a> .</p>
<ul>
<li><a href="#Creating+new+bot+with+BotFather">Creating new bot with BotFather</a></li>
<li><a href="#First+message">First message</a></li>
<li><a href="#Commands">Commands</a></li>
<li><a href="#Keyboards">Keyboards</a></li>
<li><a href="#User">User</a></li>
<li><a href="#Inline+Keybords">Inline keyboards</a></li>
<li><a href="#parse_mode">parse_mode</a></li>
<li><a href="#Location+and+Number">Location and Number</a></li>
<li><a href="#grpups+and+channel+interaction">Interacting with groups and channels</a></li>
</ul>
<p><a name="user-content-Creating+new+bot+with+BotFather"></a></p>
<h3><a href="#creating-new-bot-with-botfather" aria-hidden="true" class="anchor" id="user-content-creating-new-bot-with-botfather"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating new bot with BotFather</h3>
<p>To create a bot on Telegram messenger firstly you need to contact with @BotFather .So go ahead and search for @BotFather in your messenger.Once you got there you should ask BotFather to give you a token.<br>
You could do this by typing  <code>/newbot</code> and sending it to BotFather.<br>
Dear Father will ask you what you want to call your bot, and then you need to make a username for your bot , actually something that ends with the word <code>bot</code> like: <code>my_test_bot</code>.<br>
If you write a username which is available, BotFather will send you a token.<br>
Grab that token and keep somewhere safe.</p>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/BotFather.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/BotFather.JPG" height="500" width="400" style="max-width:100%;"></a></p>
<p>Now that your bot is created maybe you want to set a description for that.<br>
Description are those messages showing in middle of the page usually  describing what this bot can do.</p>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/desc.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/desc.JPG" height="500" width="500" style="max-width:100%;"></a></p>
<p>To set description for your bot in BotFather write <code>/setdescription</code> and send , then chose the bot you mean to change it's description and send description you want to be shown in you bot.</p>
<p>There are some other useful methods in BotFather which we won't cover in this tutorial like <code>/setcommands</code> and other.
<a name="user-content-First+message"></a></p>
<h3><a href="#first-message" aria-hidden="true" class="anchor" id="user-content-first-message"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>First message</h3>
<p>Ok now you're ready to go. Create a node project and install bot-api:</p>
<pre><code>npm install --save node-telegram-bot-api
</code></pre>
<p>Create a file index.js (or any other name) and inside the file require node-telegram-bot-api:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">TelegramBot</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>node-telegram-bot-api<span class="pl-pds">'</span></span>);</pre></div>
<p>Then you need to assign your token witch you got from BotFather:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">token</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>YOUR_TELEGRAM_BOT_TOKEN<span class="pl-pds">'</span></span>;</pre></div>
<p>And now create a new bot :</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">bot</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">TelegramBot</span>(token, {polling<span class="pl-k">:</span> <span class="pl-c1">true</span>});</pre></div>
<p>Lets try out our bot and do some real world things .We need to get messages that user sends us , to do so we would use following code:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>message<span class="pl-pds">'</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
    
     <span class="pl-c"><span class="pl-c">//</span>anything</span>
     
});</pre></div>
<p>Lets create simple greeting here. Here's big picture of our code :</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">TelegramBot</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>node-telegram-bot-api<span class="pl-pds">'</span></span>); 
<span class="pl-k">const</span> <span class="pl-c1">token</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>YOUR_TELEGRAM_BOT_TOKEN<span class="pl-pds">'</span></span>;
<span class="pl-k">const</span> <span class="pl-c1">bot</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">TelegramBot</span>(token, {polling<span class="pl-k">:</span> <span class="pl-c1">true</span>});
    
<span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>message<span class="pl-pds">'</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
    
  <span class="pl-c"><span class="pl-c">//</span>anything</span>
     
});</pre></div>
<p>We were trying to greet and we'll do it here:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>message<span class="pl-pds">'</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
    
<span class="pl-k">var</span> Hi <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hi<span class="pl-pds">"</span></span>;
<span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-c1">toLowerCase</span>().<span class="pl-c1">indexOf</span>(Hi) <span class="pl-k">===</span> <span class="pl-c1">0</span>) {
<span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>,<span class="pl-s"><span class="pl-pds">"</span>Hello dear user<span class="pl-pds">"</span></span>);
} 
    
});</pre></div>
<p>Ok , now open up your command prompt and type:</p>
<pre><code>node index.js
</code></pre>
<p>Go to your bot and hit on <code>/start</code> and then type <code>"Hi"</code> to it:</p>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/first%20message.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/first%20message.JPG" height="500" width="400" style="max-width:100%;"></a></p>
<p>So now that you know how to send and receive messages in your bot you may want to put some salt on it:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>message<span class="pl-pds">'</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {

<span class="pl-k">var</span> hi <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hi<span class="pl-pds">"</span></span>;
<span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-c1">toLowerCase</span>().<span class="pl-c1">indexOf</span>(hi) <span class="pl-k">===</span> <span class="pl-c1">0</span>) {
<span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>,<span class="pl-s"><span class="pl-pds">"</span>Hello dear user<span class="pl-pds">"</span></span>);
} 
    
<span class="pl-k">var</span> bye <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>bye<span class="pl-pds">"</span></span>;
<span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-c1">toLowerCase</span>().<span class="pl-en">includes</span>(bye)) {
<span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>, <span class="pl-s"><span class="pl-pds">"</span>Hope to see you around again , Bye<span class="pl-pds">"</span></span>);
} 

});</pre></div>
<p>This time we're using "includes" method so if user sends us anything containing "bye" word we'll send him back the message:</p>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/Bye.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/Bye.JPG" height="500" width="400" style="max-width:100%;"></a></p>
And definitely you can use any other string method that you want.
<p><a name="user-content-Commands"></a></p>
<h3><a href="#commands" aria-hidden="true" class="anchor" id="user-content-commands"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Commands</h3>
<p>That's really common to send user a message describing use of bot while he taps on "/start". (these are called <a href="https://core.telegram.org/bots#commands">commands</a>)
To do so :</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">onText</span>(<span class="pl-sr"><span class="pl-pds">/</span><span class="pl-cce">\/</span>start<span class="pl-pds">/</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {

<span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>, <span class="pl-s"><span class="pl-pds">"</span>Welcome<span class="pl-pds">"</span></span>);
    
});</pre></div>
<p>Lets create another command that will send a picture to user:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">onText</span>(<span class="pl-sr"><span class="pl-pds">/</span><span class="pl-cce">\/</span>sendpic<span class="pl-pds">/</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {

<span class="pl-smi">bot</span>.<span class="pl-en">sendPhoto</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>,<span class="pl-s"><span class="pl-pds">"</span>https://www.somesite.com/image.jpg<span class="pl-pds">"</span></span> );
    
});</pre></div>
<p>So now if you write "/sendpic" on your bot an image will be sent.
Sending audios is same and simple you can use "<a href="https://github.com/yagop/node-telegram-bot-api/blob/master/doc/api.md#TelegramBot+sendAudio">sendAudio</a>" method .</p>
<p>Now you might have seen some pictures containing caption with them like the following picture.</p>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/CaptionJPG.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/CaptionJPG.JPG" height="500" width="400" style="max-width:100%;"></a></p>
<p>Well , How to to create these?
Answer is really simple you can send a caption with option on photo like so :</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">onText</span>(<span class="pl-sr"><span class="pl-pds">/</span><span class="pl-cce">\/</span>sendpic<span class="pl-pds">/</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {

<span class="pl-smi">bot</span>.<span class="pl-en">sendPhoto</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>,<span class="pl-s"><span class="pl-pds">"</span>https://www.somesite.com/image.jpg<span class="pl-pds">"</span></span>,{caption <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Here we go ! <span class="pl-cce">\n</span>This is just a caption <span class="pl-pds">"</span></span>} );
    
});</pre></div>
<p>So now you know how to create captions and how to go to new line in your messages by typing \n .</p>
<p><a name="user-content-Keyboards"></a></p>
<h3><a href="#keyboards" aria-hidden="true" class="anchor" id="user-content-keyboards"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Keyboards</h3>
<p>Lets go a step further and start working with <a href="https://core.telegram.org/bots#keyboards">keyboards</a>.
keyboards are atcually the ones shown in this picture:</p>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/keyboard.jpg" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/keyboard.jpg" height="500" width="400" style="max-width:100%;"></a></p>
<p>Keyboards are nothing but an easy way to send messages. It's like your not forcing users to write something down and send it to bot but instead your demonstrating them some options that they can tap on and a message will be sent after that.
So lets see how we can create Keyboards , we'll send Keyboards on "/start" message:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">onText</span>(<span class="pl-sr"><span class="pl-pds">/</span><span class="pl-cce">\/</span>start<span class="pl-pds">/</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
    
<span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>, <span class="pl-s"><span class="pl-pds">"</span>Welcome<span class="pl-pds">"</span></span>, {
<span class="pl-s"><span class="pl-pds">"</span>reply_markup<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
    <span class="pl-s"><span class="pl-pds">"</span>keyboard<span class="pl-pds">"</span></span><span class="pl-k">:</span> [[<span class="pl-s"><span class="pl-pds">"</span>Sample text<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Second sample<span class="pl-pds">"</span></span>],   [<span class="pl-s"><span class="pl-pds">"</span>Keyboard<span class="pl-pds">"</span></span>], [<span class="pl-s"><span class="pl-pds">"</span>I'm robot<span class="pl-pds">"</span></span>]]
    }
});
    
});</pre></div>
<p>So now if you run you will see:</p>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/Keyboards.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/Keyboards.JPG" height="500" width="400" style="max-width:100%;"></a></p>
<p>As I said in fact Keyboards are not nothing but automatic type and send for user. There is no difference if you write "I'm robot" and sending on your own or you click on Keyboard. Lets do something simple when that "I'm robot"  is received.So add this up to your previous on message:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>message<span class="pl-pds">'</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
<span class="pl-k">var</span> Hi <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hi<span class="pl-pds">"</span></span>;
<span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-c1">toLowerCase</span>().<span class="pl-c1">indexOf</span>(Hi) <span class="pl-k">===</span> <span class="pl-c1">0</span>) {
    <span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>, <span class="pl-s"><span class="pl-pds">"</span>Hello dear user<span class="pl-pds">"</span></span>);
}
<span class="pl-k">var</span> bye <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>bye<span class="pl-pds">"</span></span>;
<span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-c1">toLowerCase</span>().<span class="pl-en">includes</span>(bye)) {
    <span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>, <span class="pl-s"><span class="pl-pds">"</span>Hope to see you around again , Bye<span class="pl-pds">"</span></span>);
}    
<span class="pl-k">var</span> robot <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>I'm robot<span class="pl-pds">"</span></span>;
<span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-c1">indexOf</span>(robot) <span class="pl-k">===</span> <span class="pl-c1">0</span>) {
    <span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>, <span class="pl-s"><span class="pl-pds">"</span>Yes I'm robot but not in that way!<span class="pl-pds">"</span></span>);
}
});</pre></div>
<p>So now if you go to your bot tap on start you see Keyboards and if you tap on I'm robot you'll see the message. Note that there is no difference if you type it or you send it by Keyboards.</p>
<p><a name="user-content-User"></a></p>
<h3><a href="#user" aria-hidden="true" class="anchor" id="user-content-user"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User</h3>
<p>node-telegram-bot-api does not have any method to get users information but in case if you want to, you can get information like so:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> Hi <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hi<span class="pl-pds">"</span></span>;
<span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-c1">toLowerCase</span>().<span class="pl-c1">indexOf</span>(Hi) <span class="pl-k">===</span> <span class="pl-c1">0</span>) {
    <span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">from</span>.<span class="pl-c1">id</span>, <span class="pl-s"><span class="pl-pds">"</span>Hello  <span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">msg</span>.<span class="pl-smi">from</span>.<span class="pl-smi">first_name</span>);
}</pre></div>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/usersname.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/usersname.JPG" height="500" width="400" style="max-width:100%;"></a></p>
<p>And if you wanted to get user profile pictures you can use <a href="https://github.com/yagop/node-telegram-bot-api/blob/master/doc/api.md#telegrambotgetuserprofilephotosuserid-options--promise">getUserProfilePhotos</a> .</p>
<p><a name="user-content-Inline+Keybords"></a></p>
<h3><a href="#inline-keybords" aria-hidden="true" class="anchor" id="user-content-inline-keybords"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inline Keybords</h3>
<p>This section is under construction...</p>
<p><a name="user-content-parse_mode"></a></p>
<h3><a href="#parse_mode" aria-hidden="true" class="anchor" id="user-content-parse_mode"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>parse_mode</h3>
<p>If you want to send messages with some style there, here is how it goes. <code>parse_mode</code> defines how you want you message to be renedered.You can define it inside in your options when sending message.
Available option are HTML and Markdown.Lets see how it works in action:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>message<span class="pl-pds">'</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {

 <span class="pl-k">var</span> Hi <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hi<span class="pl-pds">"</span></span>;
 <span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-c1">toLowerCase</span>().<span class="pl-c1">indexOf</span>(Hi) <span class="pl-k">===</span> <span class="pl-c1">0</span>) {
   <span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>,<span class="pl-s"><span class="pl-pds">"</span>&lt;b&gt;bold&lt;/b&gt; <span class="pl-cce">\n</span> &lt;i&gt;italic&lt;/i&gt; <span class="pl-cce">\n</span> &lt;em&gt;italic with em&lt;/em&gt; <span class="pl-cce">\n</span> &lt;a href=<span class="pl-cce">\"</span>http://www.example.com/<span class="pl-cce">\"</span>&gt;inline URL&lt;/a&gt; <span class="pl-cce">\n</span> &lt;code&gt;inline fixed-width code&lt;/code&gt; <span class="pl-cce">\n</span> &lt;pre&gt;pre-formatted fixed-width code block&lt;/pre&gt;<span class="pl-pds">"</span></span> ,{parse_mode <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>HTML<span class="pl-pds">"</span></span>});
   }
});</pre></div>
<p>So you get idea where <code>parse_mode</code> is defined.Now if we run this:</p>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/parse_mode.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/parse_mode.JPG" height="500" width="400" style="max-width:100%;"></a></p>
<p>So that's how we do it with Html you can also write with Markdown.As mentioned in official api of Telegram only these tags are supported till now:</p>
<pre><code>&lt;b&gt;bold&lt;/b&gt;, &lt;strong&gt;bold&lt;/strong&gt;
&lt;i&gt;italic&lt;/i&gt;, &lt;em&gt;italic&lt;/em&gt;
&lt;a href="http://www.example.com/"&gt;inline URL&lt;/a&gt;
&lt;code&gt;inline fixed-width code&lt;/code&gt;
&lt;pre&gt;pre-formatted fixed-width code block&lt;/pre&gt;
</code></pre>
<p>And for Markdown you can only use:</p>
<pre><code>*bold text*
_italic text_
[text](http://www.example.com/)
`inline fixed-width code`
</code></pre>
<p><a name="user-content-Location+and+Number"></a></p>
<h3><a href="#location-and-number" aria-hidden="true" class="anchor" id="user-content-location-and-number"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Location and Number</h3>
<p>There are some methods that enable you to send users location.<br>
Here is an example:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>message<span class="pl-pds">'</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
    <span class="pl-k">var</span> location <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>location<span class="pl-pds">"</span></span>;
    <span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-c1">indexOf</span>(location) <span class="pl-k">===</span> <span class="pl-c1">0</span>) {
        <span class="pl-smi">bot</span>.<span class="pl-en">sendLocation</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>,<span class="pl-c1">44.97108</span>, <span class="pl-k">-</span><span class="pl-c1">104.27719</span>);
        <span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>, <span class="pl-s"><span class="pl-pds">"</span>Here is the point<span class="pl-pds">"</span></span>);

    }
});
</pre></div>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/Location.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/Location.JPG" height="500" width="400" style="max-width:100%;"></a></p>
<p>And there is also <a href="https://github.com/yagop/node-telegram-bot-api/blob/master/doc/api.md#telegrambotsendvenuechatid-latitude-longitude-title-address-options--promise">sendVenue</a>.<br>
To send a phone number you can use <a href="https://github.com/yagop/node-telegram-bot-api/blob/master/doc/api.md#TelegramBot+sendContact">sendContact</a>.</p>
<p><a name="user-content-grpups+and+channel+interaction"></a></p>
<h3><a href="#interacting-with-groups-and-channels" aria-hidden="true" class="anchor" id="user-content-interacting-with-groups-and-channels"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interacting with groups and channels</h3>
<p>One interesting use of bots is in goupes and channels.You can use bots to manage groupes , receiving users messages and sending groupe messages. You can even send keyboards to members so that they can use the bot easier.<br>
For better understanding of how bots can be useful in goupes let create one and add it a group.<br>
So we want to create a bot that says "Have a nice day <em>Username</em>" when any member of group said something containing "Bye" keyword.
Before doing anything you have to know that a bot has no accessibility to users messages unless we add it as of a administrator.
And if don't do that bot will only has access to <a href="https://github.com/hosein2398/node-telegram-bot-api-tutorial#commands">Commands</a> that any user sends to group.And all of this is because of the <a href="https://core.telegram.org/bots#privacy-mode">privacy policy</a> that Telegram messenger follows which I think is right.
So lets get back to creating that bot , actually we don't have to do anything diffrent than creating bot for a single user usage , everything is similiar.</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>message<span class="pl-pds">'</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
    
<span class="pl-k">var</span> bye <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>bye<span class="pl-pds">"</span></span>;
<span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-c1">toLowerCase</span>().<span class="pl-en">includes</span>(bye)) {
<span class="pl-smi">bot</span>.<span class="pl-en">sendMessage</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>, <span class="pl-s"><span class="pl-pds">"</span>Have a nice day <span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">msg</span>.<span class="pl-smi">from</span>.<span class="pl-smi">first_name</span>); 
} 

});</pre></div>
<p>Now that we wrote codes go ahead and add this bot to a group , after adding it set it as of a administrator of the group so that it could get users messages.<br>
Now say something that includes "bye":</p>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/Bot.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/Bot.JPG" height="500" width="400" style="max-width:100%;"></a></p>
<p>Now lets do another thing , write some codes that bot will remove a person from group if they say a specific word.For instance you can create a bot that will remove member if they curse in group.<br>
Here we will write codes that if someone says anything containing "idiot" bot will remove that person from group.</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>message<span class="pl-pds">'</span></span>, (<span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
    
<span class="pl-k">var</span> what <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>idiot<span class="pl-pds">"</span></span>;
<span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-c1">text</span>.<span class="pl-en">includes</span>(what)) {
<span class="pl-smi">bot</span>.<span class="pl-en">kickChatMember</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">chat</span>.<span class="pl-c1">id</span>,  <span class="pl-smi">msg</span>.<span class="pl-smi">from</span>.<span class="pl-c1">id</span>);
}    

});</pre></div>
<p>Here we have used <a href="https://github.com/yagop/node-telegram-bot-api/blob/58566d2df5146611a6a3e6140ca616403d24a20e/README.md#telegrambotkickchatmemberchatid-userid--promise">kickChatMember</a> method to remove a member it receives two parameters , first one is id of chat and second one is id of user which you want to remove.Now if you add this bot among admins of a group and somebody says something containing "idiot":</p>
<p><a href="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/Bot_2.JPG" target="_blank"><img src="https://raw.githubusercontent.com/hosein2398/node-telegram-bot-api-tutorial/master/pics/Bot_2.JPG" height="400" width="300" style="max-width:100%;"></a></p>
<p>We can't cover all methods there are some other methods related to groups and channels: <a href="https://github.com/yagop/node-telegram-bot-api/blob/master/doc/api.md#TelegramBot+getChat">getChat</a> , <a href="https://github.com/yagop/node-telegram-bot-api/blob/master/doc/api.md#TelegramBot+getChatAdministrators">getChatAdministrators</a> , <a href="https://github.com/yagop/node-telegram-bot-api/blob/master/doc/api.md#telegrambotgetchatmemberscountchatid--promise">getChatMembersCount</a> , <a href="https://github.com/yagop/node-telegram-bot-api/blob/master/doc/api.md#telegrambotgetchatmemberchatid-userid--promise">getChatMember</a> , <a href="https://github.com/yagop/node-telegram-bot-api/blob/master/doc/api.md#telegrambotleavechatchatid--promise">leaveChat</a></p>
<h3><a href="#contributing" aria-hidden="true" class="anchor" id="user-content-contributing"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributing</h3>
<ul>
<li>If you found any typos or grammatically wrong sentences you can just make a PR.(In case you were not interested to, you can make an issue.)</li>
<li>If you have anything In mind that can improve this tutorial please make a PR.</li>
</ul>
</article>